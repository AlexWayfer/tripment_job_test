# –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–∏ Back-end —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ Tripment

[–í–∞–∫–∞–Ω—Å–∏—è](https://career.habr.com/vacancies/1000059509).

## –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞

[–û—Ä–∏–≥–∏–Ω–∞–ª](https://github.com/tripment/test-tasks/blob/326bc8d/tripment-backend/README.md).

### –û–ø–∏—Å–∞–Ω–∏–µ

–£ –Ω–∞—Å –≤ –¢—Ä–∏–ø–º–µ–Ω—Ç–µ –±—ç–∫–µ–Ω–¥ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–æ–±—â–∞.
–ß–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å —Ç–∞–∫–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –±—ã —É–¥–æ–±–µ–Ω —Ñ—Ä–æ–Ω—Ç—É.
–í —Ç–µ—Å—Ç–æ–≤–æ–º –∑–∞–¥–∞–Ω–∏–∏ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑ —Ç–∞–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø–æ–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä. –û–Ω –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å JSON.
–í–Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞ –≤—ã–¥–∞—é—Ç—Å—è —Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞—á–∞–ª–æ–º —Å–ª–æ–≤–∞,
–∞ –¥–∞–ª–µ–µ —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å –≤—Ö–æ–¥–∏—Ç –≤ –Ω–∞–∑–≤–∞–Ω–∏–µ.

–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω—É–∂–Ω–æ —Å–ø–∞—Ä—Å–∏—Ç—å –∏–∑ [–í–∏–∫–∏–ø–µ–¥–∏–∏](https://en.wikipedia.org/wiki/Medical_procedure#List_of_medical_procedures).

### –£—Å–ª–æ–≤–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–π Ruby on Rails –∏ PostgreSQL
- –î–∞–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –∫–æ–¥
- –†–∞–∑–≤–µ—Ä–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –û—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–∞ —Ç–≤–æ—ë —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ

## –†–µ—à–µ–Ω–∏–µ

### Rails

–í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –æ Rails –æ–ø–∏—Å—ã–≤–∞–ª –≤ [—Å–æ—Å–µ–¥–Ω–µ–º —Ç–µ—Å—Ç–æ–≤–æ–º –∑–∞–¥–∞–Ω–∏–∏](https://github.com/AlexWayfer/realy_job_test#rails).

–ù–æ–≤—ã–µ:

*   –ù–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, —á—Ç–æ `id:primary_key` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `create_table`,
    —Å—á–∏—Ç–∞—é —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏ –∫–æ–Ω—Ç—Ä-–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º.
*   –ü–æ—á–µ–º—É-—Ç–æ –º–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç `belongs_to` –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—é –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∞ —ç—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏–π
    –∏ –≤ –ë–î `null: true`.
*   `union` (SQL) —á–µ—Ä–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–∂–µ–º‚Ä¶
*   –ù–µ—Ç `select_append`‚Ä¶
*   –ù–µ—Ç `distinct on`. üòï
    [Issue](https://github.com/rails/rails/issues/17706)
    *   [Gem –¥–ª—è —ç—Ç–æ–≥–æ](https://github.com/alecdotninja/active_record_distinct_on)
        [–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](https://github.com/alecdotninja/active_record_distinct_on/pull/12).
*   –°–ª–æ–∂–Ω–µ–µ –æ–±–µ—Ä–Ω—É—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –ø–æ–¥-–∑–∞–ø—Ä–æ—Å,
    –∫–∞–∫ [`from_self` –≤ Sequel](https://www.rubydoc.info/gems/sequel/Sequel%2FDataset:from_self).
*   SQL `join` –ø–æ—á–µ–º—É-—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `joins`.
    *   –ò –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–∏–±–æ —á–∏—Å—Ç—ã–π SQL, –ª–∏–±–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏, –Ω–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã.
*   –ù–µ—Ç `select case` (–∫—Ç–æ –±—ã –º–æ–≥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ –≤—ã—à–µ–∏–∑–ª–æ–∂–µ–Ω–Ω–æ–≥–æ).

### –ü–∞—Ä—Å–∏–Ω–≥ –∏–∑ –í–∏–∫–∏–ø–µ–¥–∏–∏

–†–µ—à–∏–ª –≤—ã–Ω–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –º–µ–¥. –ø—Ä–æ—Ü–µ–¥—É—Ä –∏–∑ –í–∏–∫–∏–ø–µ–¥–∏–∏ –≤ –ª–∏–±—É.
–ù–µ –Ω–∞—à—ë–ª –≥–∞–π–¥–æ–≤ –ø–æ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É –ª–∏–± –≤ Rails, —Å–¥–µ–ª–∞–ª –≤—Ä—É—á–Ω—É—é –∏ –µ—ë, –∏ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–µ—ë.
–í —Ç–µ—Å—Ç–∞—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VCR –∏–ª–∏ –∞–Ω–∞–ª–æ–≥, –Ω–æ —è —Ä–µ—à–∏–ª –≤ —Ç–æ–º —á–∏—Å–ª–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
–∫ –í–∏–∫–∏–ø–µ–¥–∏–∏, —Ç–æ –µ—Å—Ç—å –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è —Ñ–æ—Ä–º–∞—Ç ‚Äî —á—Ç–æ–±—ã —ç—Ç–æ –±—ã–ª–æ –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å.
–ù–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, VCR –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–µ—Å–ª–æ–∂–Ω–æ.

–¢–∞–∫–∂–µ –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞ —è—Å–Ω–æ, –∫–∞–∫ –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã:
–ø–æ–¥–æ–±–∏—è Rake-task –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–ª–∏ –ª—É—á—à–µ end-point, –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π,
–µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π ‚Äî —Ç–æ –ø–æ –∫–∞–∫–æ–π –ª—É—á—à–µ —Å–∏—Å—Ç–µ–º–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∫–ª—é—á, –∏–º—è-–ø–∞—Ä–æ–ª—å, —á—Ç–æ-—Ç–æ –µ—â—ë).
–¢–∞–∫ –∫–∞–∫ –Ω–µ –±—ã–ª–æ —É—Ç–æ—á–Ω–µ–Ω–∏–π, —Ä–µ—à–∏–ª, —á—Ç–æ —Ç–∞—Å–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (–¥–∞–Ω–Ω—ã–µ –Ω–µ —à–∏–±–∫–æ —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è).

–î–ª—è —Ç–µ—Å—Ç–æ–≤ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±—Ä–∞–ª –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –í–∏–∫–∏–ø–µ–¥–∏–∏, –Ω–æ –Ω–µ –≤—Å–µ,
–∞ –∫–∞–∫–∏–µ-—Ç–æ –æ–±—â–∏–µ –∏ –∫—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏, –≤—Ä–æ–¥–µ —Ç–µ—Ö, –∫–æ–≥–¥–∞ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –≤–Ω–µ —Å—Å—ã–ª–∫–∏, –ª—é–±–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å,
–¥–µ—Ñ–∏—Å—ã, –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã, —Å–ª–æ–º–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏, —Å—Å—ã–ª–∫–∏ —Å –ø—Ä–∏–º–µ—á–∞–Ω–∏—è–º–∏,
–ª–∏—à–Ω–∏–µ —Å–ª–æ–≤–∞-—É—Ç–æ—á–Ω–µ–Ω–∏—è –≤ —Å—Å—ã–ª–∫–∞—Ö ("(–º–µ–¥–∏—Ü–∏–Ω–∞)").

–°–Ω–∞—á–∞–ª–∞ –≤–∑—è–ª Faraday –∏ —Ä—É—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –ø–æ—Ç–æ–º —Å–ª—É—á–∞–π–Ω–æ –Ω–∞—Ç–∫–Ω—É–ª—Å—è –Ω–∞ –¥–∂–µ–º—ã –≤—Ä–æ–¥–µ
[MediaWiktory](https://github.com/molybdenum-99/mediawiktory), –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–µ—Ä–Ω—É–ª—Å—è –∫ —Ä—É—á–Ω–æ–º—É,
—Ç–∞–∫ –∫–∞–∫ –æ–±–ª–µ–≥—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ–±–æ–ª—å—à–æ–µ, –ø–ª—é—Å –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `extracts`.
–û–¥–Ω–∞–∫–æ, –æ–±—Ä–∞—Ç–∏–ª –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –¥–∂–µ–º `mediawiki_api` –∏ —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ:
—á—É—Ç—å –º–µ–Ω—å—à–µ –∫–æ–¥–∞, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –¥–∂–µ–º.

–ü—Ä–æ–±–æ–≤–∞–ª —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ–¥–∞
–æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `Hash`, –≤–∫–ª—é—á–∞—è –ø—É—Å—Ç—ã–µ —É –ø—Ä–æ—Ü–µ–¥—É—Ä –±–µ–∑ –ø–æ–¥-–≤–∏–¥–æ–≤.
–ù–æ –≤—Å—ë –∂–µ –ø–µ—Ä–µ–¥–µ–ª–∞–ª –Ω–∞ –±–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã —Å `Hash` –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤.

–ï—â—ë –Ω–µ–º–Ω–æ–≥–æ –ø–æ–≤–æ–∑–∏–ª—Å—è —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–∂–µ–º–∞–º–∏:
*   `mediawiki_api`:
    *   Issues –æ—Ç–∫–ª—é—á–µ–Ω—ã (–∑–µ—Ä–∫–∞–ª–æ —Å Gerrit).
    *   –°—Ç—Ä–∞–Ω–Ω—ã–π `client.get_wikitext`:
        *   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ `action=raw` –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö –ª–∏–±–∞—Ö –Ω–µ –Ω–∞—à—ë–ª.
        *   –§–æ—Ä–º–∞—Ç –ø—Ä–∏–∫–æ–ª—å–Ω—ã–π, –Ω–æ –≤—Å—ë –∂–µ —Å–ø–µ—Ü. —Å–∏–º–≤–æ–ª—ã –≤—ã—Ä–µ–∑–∞—Ç—å –Ω–µ–ø—Ä–æ—Å—Ç–æ.
    *   –ü–æ–¥–¥–µ—Ä–∂–∫–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤—Ä–æ–¥–µ `exintro` –∏ `explaintext` —É `query` –Ω–µ –Ω–∞—à—ë–ª.
*   `mediawiktory`:
    *   –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Ä–æ–¥–µ –ª—É—á—à–µ, —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∏—è—Ç–Ω–µ–µ.
    *   –§–æ—Ä–º–∞—Ç–∞ `raw` –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –¥–æ–±–∏—Ç—å—Å—è.
        *   `plaintext` –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤, –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –≤–æ–æ–±—â–µ.
        *   –û—Å—Ç–∞–≤–∏–ª `html` (–¥–µ—Ñ–æ–ª—Ç) –∏ —Ä–µ—à–∏–ª –ø–∞—Ä—Å–∏—Ç—å –µ–≥–æ.
            *   –ò–º–µ–ª –æ–ø—ã—Ç —Å –¥–∂–µ–º–æ–º `oga` –¥–ª—è —ç—Ç–æ–≥–æ, –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, —Å—á–∏—Ç–∞—é, –ø–æ–¥—Ö–æ–¥–∏—Ç.
            *   –°–¥–µ–ª–∞–ª —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –≤–º–µ—Å—Ç–æ –∫—É—á–∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
                –ø—Ä–∏ –ø–ª–æ—Å–∫–æ–º —Å–ø–∏—Å–∫–µ —Å—Ç—Ä–æ–∫ `raw` —Ñ–æ—Ä–º–∞—Ç–∞.

–°–¥–µ–ª–∞–ª –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ `parent` –∏ `children` –≤—Ä—É—á–Ω—É—é.

–í —Ç–æ–º —á–∏—Å–ª–µ —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å `category` —É –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä,
—Ä–µ—à–∏–ª —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—É—é –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—é.

–ü–æ—Ç–æ–º –≤—Å–ø–æ–º–Ω–∏–ª, —á—Ç–æ —É Sequel –µ—Å—Ç—å –Ω–µ–ø–ª–æ—Ö–æ–π –ø–ª–∞–≥–∏–Ω –¥–ª—è –¥–µ—Ä–µ–≤—å–µ–≤, –ø–æ–≥—É–≥–ª–∏–ª ‚Äî –Ω–∞—à—ë–ª
[—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π](https://github.com/rails/acts_as_tree)
–∏ [–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π](https://github.com/stefankroes/ancestry).
–ù–µ –∑–Ω–∞—é, —Å—Ç–æ–∏—Ç –ª–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Ü–µ–ª—ã–π –ø–ª–∞–≥–∏–Ω –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–∞—á–∏, –Ω–æ —Ö–æ—Ç–µ–ª –¥–æ–≤–µ—Ä–∏—Ç—å—Å—è –µ–º—É
–∏ –Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫, –∞ —Ç–∞–∫–∂–µ –∏–º–µ—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ö–µ–ª–ø–µ—Ä–æ–≤ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".
–û–¥–Ω–∞–∫–æ —è –Ω–µ –Ω–∞—à—ë–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∏–º –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã—Ö –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π, —Ç–∞–∫ —á—Ç–æ —Ä–µ—à–∏–ª –Ω–µ —Ä–∏—Å–∫–æ–≤–∞—Ç—å
–∏ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –∞ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—É—é –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é.

–ù–∞–≤–µ—Ä–Ω–æ–µ, `Category` —Å—Ç–æ–∏–ª–æ –Ω–∞–∑–≤–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ, `ProcedureCategory`,
–Ω–æ —Ä–∞–∑ –≤ –∑–∞–¥–∞–Ω–∏–∏ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ ‚Äî –Ω–µ –±—É–¥—É –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å.

–ú–æ–∂–Ω–æ –±—ã–ª–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç, —Å–¥–µ–ª–∞–≤ –µ–≥–æ –º–∞—Å—Å–æ–≤—ã–º, –∏–ª–∏ –Ω–µ —É–¥–∞–ª—è—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏,
–Ω–æ —è –Ω–µ —Å—Ç–∞–ª –Ω–∞ —Ç–∞–∫–∏—Ö –æ–±—ä—ë–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ü–æ–∏—Å–∫

–Ø –±—ã –≤—ã–Ω–µ—Å –∫–æ–¥ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ service objects, –Ω–æ:
*   –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≤ Rails –Ω–µ—Ç;
*   action –≤—Å–µ–≥–æ –æ–¥–∏–Ω;
*   –æ–Ω –Ω–µ –≤—ã–≥–ª—è–¥–∏—Ç –≥—Ä–æ–º–æ–∑–¥–∫–∏–º;
—Ç–∞–∫ —á—Ç–æ –Ω–µ —Å—Ç–∞–ª.

–ï—â—ë —è –º–æ–≥ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Elasticsearch, –∫–∞–∫ [–¥–ª—è Realy](https://github.com/AlexWayfer/realy_job_test),
–Ω–æ –≤ –∑–∞–¥–∞–Ω–∏–∏ —Ç–∞–∫–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –Ω–µ –±—ã–ª–æ, –∏ —è —Ä–µ—à–∏–ª –Ω–µ —É—Å–ª–æ–∂–Ω—è—Ç—å —Å–µ–±–µ –∂–∏–∑–Ω—å,
–≤ —Ç–æ–º —á–∏—Å–ª–µ –ø–æ—Ç–æ–º—É —á—Ç–æ –º–∞–ª–æ —Å –Ω–∏–º –∑–Ω–∞–∫–æ–º (–∞ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SQL `like` –æ–∫–∞–∑–∞–ª–æ—Å—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º).

–ï—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –ø–æ–∏—Å–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º, –Ω–æ –Ω–µ —Å—Ç–∞–ª –µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å,
–ø–æ—Ç–æ–º—É –∫–∞–∫ —ç—Ç–æ–≥–æ –Ω–µ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ –≤ –∑–∞–¥–∞–Ω–∏–∏, –∏ —è –∏ —Ç–∞–∫ –∑–∞—Ç—è–Ω—É–ª –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–¢–∞–∫ –∫–∞–∫ `union` –≤ PostgreSQL –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –∏–∑ –ø–æ–¥-–∑–∞–ø—Ä–æ—Å–æ–≤,
–¥–æ–±–∞–≤–∏–ª –∫–∞—Å—Ç–æ–º–Ω—É—é –∫–æ–ª–æ–Ω–∫—É —Å `order` –ø–æ—Ç–æ–º.

–î–æ–ª–≥–æ –≤–æ–∑–∏–ª—Å—è —Å `union`, `distinct on(id)` (–∏–ª–∏ `group by id`) –∏ `order by priority`,
–Ω–æ –≤—Å—ë –∂–µ —Å–¥–µ–ª–∞–ª (–Ω–µ –∏–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –Ω–æ –∏–∑ –ø—Ä–∏–Ω—Ü–∏–ø–∞). –í –∫–æ–¥–µ "Solution #1".

–ü–æ–∫–∞ –¥–µ–ª–∞–ª, –º–Ω–µ –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `_` –ø–µ—Ä–µ–¥ `%query%`.
–Ø –∑–Ω–∞–ª, —á—Ç–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∫–∞–∫–æ–π-–ª–∏–±–æ —Å–∏–º–≤–æ–ª (–∫–∞–∫ `.` –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö),
–Ω–æ –∑–∞–±—ã–ª (—Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é `like`) –∏ –Ω–µ –¥–æ–≥–∞–¥–∞–ª—Å—è.

–î–∞–ª–µ–µ –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ –µ—â—ë —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `case position()`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç `union`
–∏/–∏–ª–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏. –ñ–∞–ª–µ—é, —á—Ç–æ –Ω–µ –¥–æ–≥–∞–¥–∞–ª—Å—è —Å–∞–º.

–†–µ–∞–ª–∏–∑–æ–≤–∞–ª –≤—Å–µ 3 –ø–æ–¥—Ö–æ–¥–∞. –î–∞, –≤–∏–¥–∏–º–æ, —Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ —É –º–µ–Ω—è –º–∞–ª–æ –æ–ø—ã—Ç–∞.

### –£–∑–Ω–∞–ª –Ω–æ–≤–æ–µ

*   –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –≤ ActiveRecord.
*   `union` –≤ PostgreSQL –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫ –∏–∑ –ø–æ–¥-–∑–∞–ø—Ä–æ—Å–æ–≤.
*   `position(substring in string)` –≤ SQL.

## –ó–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   Ruby, –≤–µ—Ä—Å–∏—è —É–∫–∞–∑–∞–Ω–∞ –≤ —Ñ–∞–π–ª–µ `.ruby-version`
*   PostgreSQL

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Rails –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –ø–æ—á–µ–º—É-—Ç–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª–∏ –≤ —à–∞–±–ª–æ–Ω–µ,
–Ω—É –∏ —è –Ω–µ –±—É–¥—É.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

`rails spec`, –Ω–æ –æ–Ω –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è RSpec, —Ç–∞–∫ —á—Ç–æ —è —Å–æ–≤–µ—Ç—É—é `bundle exec rspec`.
